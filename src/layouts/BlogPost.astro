--- 
import Layout from "./Layout.astro"
import '../styles/blog.css'
import {db,Posts,eq} from "astro:db"
const {headings, url, frontmatter} = Astro.props
import ThumbsUp from "@lucide/astro/icons/thumbs-up"
import ThumbsDown from "@lucide/astro/icons/thumbs-down"
--- 

<Layout>
<div class="border-t-slate-700 border-t-1 w-full flex justify-center">
  <div class="w-4xl flex flex-row">

  <ul class="hidden w-4xs flex-col flex-none lg:flex pl-4 bg-base-100 h-min">
    <li><p class="text-slate-400" style="margin-left:0rem;margin-top:1.5rem;">Jump to...</p>
     
    </li>{headings.map((headingObj) => 
    <li>
      <div class="divider"/>
	<a class="link" href={url + "#" + headingObj.slug}>{headingObj.text}</a>
    </li>
    )}
    <li class="h-8"/>
  </ul>
  <div class="flex flex-col">
    {frontmatter.tags.includes("wip") ? <h1>⚠️ Work in Progress</h1> :<></>}
    <h1>{frontmatter.title}</h1>
    <p class="text-gray-400">{frontmatter.description}</p>
    <slot/>

    <div>{(await db.select({likes:Posts.likes,dislikes:Posts.dislikes}).from(Posts).where(eq(Posts.file_name, url))).map(({likes,dislikes}) => 
      <div>
	<button class="btn btn-outline ml-4 mt-4"><ThumbsUp/>{likes}</button>
	<button class="btn btn-outline ml-2 mt-4"><ThumbsDown/>{dislikes}</button>
      </div>)}</div>
  </div>
      </div>
    
</div>
</Layout>

